@using TreeView.Models;
@model List<TreeView.Models.Node>
<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />

    <link href="~/Content/bootstrap.min.css" rel="stylesheet" />
    <script src="~/Scripts/jquery-1.9.1.min.js"></script>
    <script src="~/Scripts/bootstrap-treeview.min.js"></script>
    <title>Index</title>
</head>
<body>
    <div>
        <h2>班组建立</h2>
        <label for="">添加组名</label>
        <input id="newName" type="text" />
        <label for="">上级组名</label>
        <select id="pSelect1">
            @foreach (var item in Model)
            {
                <option value="@item.Id">@item.Text</option>
            }
        </select>
        @for (int i = 1; i < ViewBag.MaxLevel + 1; i++)
        {
            <input type="" />
        }
        <input id="newName" type="text" />

    </div>
    <div>
        <div id="tree" class="col-lg-2">

        </div>
        <div id="res" class="col-lg-10">

        </div>
    </div>
</body>
</html>
<script type="text/javascript">

    var data = [
        {
            text: "Parent 1",
            id: 1111,
            nodes: [
                {
                    text: "Child 1",
                    id: 16,
                    nodes: [
                        {
                            text: "Grandchild 1",
                            id: 2222
                        },
                        {
                            text: "Grandchild 2",
                            id: 3333
                        }
                    ]
                },
                {
                    text: "Child 2",
                    id: 5555
                }
            ]
        },
        {
            text: "Parent 2",
            id: 4444
        },
        {
            text: "Parent 3"
        },
        {
            text: "Parent 4"
        },
        {
            text: "Parent 5"
        }
    ];

    function getTree() {
        // Some logic to retrieve, or generate tree structure
        return data;
    }

    $('#tree').treeview(
    {
        color: "#428bca",
        data: getTree(),
        onNodeSelected: function(event, node) {

            $("#res").text(node.id);
        }
    });


    //根据父id与层级，获取下拉框数据源
    function setNextSelectList(parentId, level) {
        var paraData = {};
        paraData.parentId = parentId;
        paraData.level = level;

        $.ajax({
            url: '@Url.Action("GetNodesByParentId")',
            type: "POST",
            data: paraData,
            success: function(data) {
                alert(data);
            }
        });
    }


    //新增班组
    function addNode() {
        var groupName = $("#newName").text();
        var level=
        var paraData = {};


    }


</script>
